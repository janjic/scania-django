{% extends "admin/base.html" %}
{% load static i18n %}

{% block title %}SCANIA{% endblock %}

{% block branding %}
    <h1 id="site-name">
        <span class="icon-jet"></span> {% trans "Scania" %}
    </h1>
{% endblock %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "core/css/branding.css" %}"/>
    <link rel="stylesheet" type="text/css" href="{% static "core/css/icons/style.css" %}"/>
{% endblock %}

{% block nav-global %}

{% endblock %}

{% block userlinks %}
    <a href="{% url 'admin:logout' %}?next=/admin">{% trans 'Log out' %}</a>
{% endblock %}

{% block footer %}
    {{ block.super }}
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript"> (function (d, w, c) {
        (w[c] = w[c] || []).push(function () {
            try {
                w.yaCounter32240214 = new Ya.Metrika({
                    id: 32240214,
                    clickmap: true,
                    trackLinks: true,
                    accurateTrackBounce: true,
                    webvisor: true
                });
            } catch (e) {
            }
        });
        var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () {
            n.parentNode.insertBefore(s, n);
        };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";
        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else {
            f();
        }
    })(document, window, "yandex_metrika_callbacks");</script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/32240214" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript><!-- /Yandex.Metrika counter -->
    <!-- Google Analytics counter -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-67280038-1', 'auto');
        ga('send', 'pageview');

        if ($('#id_dealer').length) {
            let mapping = {
                'SI': ['uros_debelak', 'milan_min', 'mitja_ladinek', 'luka_cupkovic', 'izidor_golicnik', 'elvis_madrusa'],
                'HR': ['tomislav_mucnjak', 'robert_tisaj', 'kresimir_pehar', 'goran_kovac', 'branimir_lukacevic', 'dubravko_joka', 'teodor_naka'],
                'BIH': ['michel_mrdjen', 'dejan_jeremic', 'nikola_jovanovic', 'mile_sarvevic', 'srdjan_masic', 'martin_milevski', 'dejan_nikolic', 'dejan_nastic'],
                'RS': ['bojan_lolic', 'dalila_glavic', 'dejan_koleska'],
                'MK': ['bojan_lolic', 'dalila_glavic', 'dejan_koleska']
            };

            let $ = jQuery;
            $('#id_dealer').change(function () {
                var $select2 = $('#id_customer2');
                var options = $select2.data('select2').options.options;
                $select2.select2('destroy');
                var availableOptions = mapping[$(this).val()];
                $select2.find('option').each(function (i, el) {
                    if (availableOptions.indexOf($(el).val()) !== -1) {
                        $(el).prop('disabled', false);
                    } else {
                        $(el).prop('disabled', true);
                    }

                });
                $select2.select2(options);
            }
        }
        )
        ;
    </script>
    <!-- /Google Analytics counter -->
{% endblock %}